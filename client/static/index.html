<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Amnezichat</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="/static/purify.min.js" defer></script>
  <script src="/static/app.js" defer></script>
</head>
<body>
  <main class="container">
    <section id="messages" aria-live="polite" role="log"></section>

    <form class="input-container" onsubmit="event.preventDefault(); sendMessage();">
      <input type="text" id="messageInput" placeholder="Type a message..." autocomplete="off" aria-label="Message input" />
      <button type="submit" aria-label="Send message">ğŸ’¬</button>
      <button type="button" onclick="document.getElementById('mediaInput').click()" aria-label="Send media">ğŸ–¼ï¸</button>
      <button type="button" id="micButton" onclick="startVoiceRecording()" aria-label="Voice message">ğŸ¤</button>
      <button type="button" onclick="toggleSettings()" aria-label="Open settings">âš™ï¸</button>
    </form>

    <section id="recordingStatus" hidden class="recording-status" aria-live="assertive">
      <span id="timer">00:00</span>
      <button type="button" onclick="cancelVoiceRecording()" class="danger">Cancel âŒ</button>
    </section>
  </main>

  <aside id="settings" hidden class="modal">
    <div class="settings-content">
      <h2>Settings</h2>
      <input type="file" accept="image/*" id="profilePicInput" hidden onchange="handleProfilePicChange(event)" />
      <button onclick="document.getElementById('profilePicInput').click()">Choose Profile Picture</button>
      <button onclick="toggleTheme()">Toggle Light/Dark Mode</button>
      <button onclick="closeSettings()">Close</button>
    </div>
  </aside>

  <div id="mediaModal" class="media-modal" onclick="closeMediaModal()">
    <span class="close-btn" onclick="closeMediaModal(); event.stopPropagation();">&times;</span>
  </div>

  <input type="file" accept="image/*,video/*" id="mediaInput" hidden onchange="handleMediaChange(event)" />
</body>
</html>
